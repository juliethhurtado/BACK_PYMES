package co.edu.unicauca.sgph.reservatemporal.infrastructure.mapper;

import java.util.stream.Collectors;

import org.mapstruct.Mapper;
import org.mapstruct.Mapping;
import org.springframework.data.domain.Page;
import org.springframework.stereotype.Component;

import co.edu.unicauca.sgph.reservatemporal.domain.model.ReservaTemporal;
import co.edu.unicauca.sgph.reservatemporal.infrastructure.input.DTORequest.ReservaTemporalInDTO;
import co.edu.unicauca.sgph.reservatemporal.infrastructure.output.persistence.entity.ReservaTemporalEntity;


@Mapper(componentModel = "spring") 
public interface ReservaTemporalRestMapper {

	// Mapear de ReservaTemporalEntity a ReservaTemporal
    @Mapping(target = "identificacion", source = "numeroIdentificacion")
    @Mapping(target = "idEspacioFisico", source = "espacioFisico.idEspacioFisico")
    @Mapping(target = "idUbicacion", expression = "java(entity.getEspacioFisico() != null && entity.getEspacioFisico().getUbicacion() != null ? entity.getEspacioFisico().getUbicacion().getIdUbicacion() : null)")
    @Mapping(target = "salon", source = "espacioFisico.salon")
    @Mapping(target = "estado", expression = "java(entity.getEstado() != null ? entity.getEstado().getDescripcion() : null)")
    ReservaTemporal toReservaTemporal(ReservaTemporalEntity entity);

    // Mapear del modelo de dominio (ReservaTemporal) al DTO de salida
    ReservaTemporalInDTO toReservaTemporalInDTO(ReservaTemporal reservaTemporal);

    // Mapea una p√°gina de ReservaTemporal al DTO de salida
    default Page<ReservaTemporalInDTO> toPageReservaTemporalInDTO(Page<ReservaTemporal> reservas) {
        return reservas.map(this::toReservaTemporalInDTO);
    }
}
