package co.edu.unicauca.sgph.reservatemporal.infrastructure.mapper;

import org.mapstruct.Mapping;
import org.springframework.data.domain.Page;

import co.edu.unicauca.sgph.reservatemporal.domain.model.ReservaTemporal;
import co.edu.unicauca.sgph.reservatemporal.infrastructure.input.DTORequest.ReservaTemporalInDTO;
import co.edu.unicauca.sgph.reservatemporal.infrastructure.output.persistence.entity.ReservaTemporalEntity;

@org.mapstruct.Mapper(componentModel = "spring")
public interface ReservaTemporalRestMapper {

	@Mapping(target = "identificacion", source = "numeroIdentificacion") // Mapeo explícito para evitar conflictos
    @Mapping(target = "idEspacioFisico", source = "espacioFisico.idEspacioFisico")
    @Mapping(target = "idUbicacion", source = "espacioFisico.ubicacion.idUbicacion")
    @Mapping(target = "salon", source = "espacioFisico.salon")
    @Mapping(target = "estado", expression = "java(entity.getEstado() != null ? entity.getEstado().getDescripcion() : null)")
    ReservaTemporal toReservaTemporal(ReservaTemporalEntity entity);

    // Mapea del modelo de dominio al DTO de entrada/salida
    ReservaTemporalInDTO toReservaTemporalInDTO(ReservaTemporal reservaTemporal);

    // Mapea una página de ReservaTemporal al DTO de entrada/salida
    default Page<ReservaTemporalInDTO> toPageReservaTemporalInDTO(Page<ReservaTemporal> reservas) {
        return reservas.map(this::toReservaTemporalInDTO);
    }
}
