package co.edu.unicauca.sgph.reservatemporal.infrastructure.mapper;

import org.mapstruct.Mapper;
import org.mapstruct.Mapping;
import org.mapstruct.Named;
import org.springframework.data.domain.Page;

import co.edu.unicauca.sgph.reservatemporal.domain.model.ReservaTemporal;
import co.edu.unicauca.sgph.reservatemporal.infrastructure.input.DTORequest.ReservaTemporalInDTO;
import co.edu.unicauca.sgph.reservatemporal.infrastructure.output.persistence.entity.EstadoReservaEnum;
import co.edu.unicauca.sgph.reservatemporal.infrastructure.output.persistence.entity.ReservaTemporalEntity;


@Mapper(componentModel = "spring") 
public interface ReservaTemporalRestMapper {

	@Mapping(target = "identificacion", source = "numeroIdentificacion")
    @Mapping(target = "idEspacioFisico", source = "espacioFisico.idEspacioFisico")
    @Mapping(target = "idUbicacion", source = "espacioFisico.ubicacion.idUbicacion")
    @Mapping(target = "salon", source = "espacioFisico.salon")
    @Mapping(target = "estado", qualifiedByName = "estadoToDescripcion")
    ReservaTemporal toReservaTemporal(ReservaTemporalEntity entity);

    @Named("estadoToDescripcion")
    default String mapEstadoToDescripcion(EstadoReservaEnum estado) {
        return estado != null ? estado.name() : null;
    }

    // Mapear del modelo de dominio (ReservaTemporal) al DTO de salida
    ReservaTemporalInDTO toReservaTemporalInDTO(ReservaTemporal reservaTemporal);

    // Mapea una p√°gina de ReservaTemporal al DTO de salida
    default Page<ReservaTemporalInDTO> toPageReservaTemporalInDTO(Page<ReservaTemporal> reservas) {
        return reservas.map(this::toReservaTemporalInDTO);
    }
}
